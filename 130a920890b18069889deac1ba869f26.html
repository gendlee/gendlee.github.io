<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🦜&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>0021 跨境支付流程&nbsp;|&nbsp;锡安的自留地</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="0021 跨境支付流程">
  
    <meta name="description" content="跨境支付涉及跨行、汇兑等流程，本文介绍跨境支付的业务流程。">
    <meta property="og:description" content="跨境支付涉及跨行、汇兑等流程，本文介绍跨境支付的业务流程。">
  
  
    <meta property="og:image" content="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;💹&lt;/text&gt;&lt;/svg&gt;">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🦜&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="e48d9ceebf4c4de2b657c3a3d1d308f4.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🧰&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>工具</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🎏&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>关于我</span>
        </div>
      </a>
    
  
</nav>
  <header class="Header">
    
      <div class="Header__Cover">
        <img src="https://www.notion.so/images/page-cover/gradients_2.png">
      </div>
    
    <div class="Header__Spacer ">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;💹&lt;/text&gt;&lt;/svg&gt;"></span>
      </div>
    
    <h1 class="Header__Title">0021 跨境支付流程</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Thu, Oct 31, 2024</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--blue">
            <a href="tag/支付.html">支付</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--gray">
            <a href="tag/流程.html">流程</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/130a920890b18069889deac1ba869f26" class="PageRoot"><h2 id="https://www.notion.so/130a920890b1808bb3c8cdfd85dda141" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/130a920890b1808bb3c8cdfd85dda141"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">情景假设</span></span></h2><h3 id="https://www.notion.so/130a920890b180999618fc43ec171224" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/130a920890b180999618fc43ec171224"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">跨境扫码支付场景</strong></span></span></h3><div id="https://www.notion.so/130a920890b18053b05fceb0d60ca469" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">1. 付款方用户支付的是</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">人民币</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/130a920890b1806d8759f58b28b5aee1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">2. 付款方的借记卡是国内银行 A 发行的，简称</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">买家开户行</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/130a920890b180f4a85cc57044dba2b4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">3. 第三方支付公司的备付金账户在国内银行 B，简称</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">第三方开户行</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/130a920890b180079d71d9f907b195a3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">4. 收款方接受的是</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">美元</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/130a920890b1802184e6d819314491e8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">5. 收款方的借记卡是国外银行 C 发行的，简称</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">卖家开户行</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/130a920890b1806f9822f66f6aaa4677" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">6. 第三方公司是通过银行 D 进行外币兑换业务，简称</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">汇兑提供行</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/130a920890b18050ab86c720fbf4ca51" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/130a920890b18095bc3ed3eb3bac11c4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">由于国内对人民币相关的外汇交易有管制，本外币交易需要满足一定要求，比如要求电商平台有对应的交易明细。为了方便你理解，我们假设已经在其他部分完成了相应的合规流程。那么接下来，我会分 4 个部分给你讲解整个支付过程：用户扫码支付、第三方公司进行本币代收、外汇交易以及外币代付。</span></span></p></div><div id="https://www.notion.so/130a920890b1802fb0d9e3c88e1c555a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/130a920890b1802b87a3dda532b03b2b" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/130a920890b1802b87a3dda532b03b2b"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">用户扫码</span></span></h3><div id="https://www.notion.so/130a920890b18051bbbff4adbc40c1ea" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">扫二维码支付显然是以用户扫码作为整个业务的起点。从终端用户的角度来看，扫码由鉴权、支付和拉取状态三个步骤组成。接下来，我们就来详细看看这几个步骤。</span></span></p></div><h3 id="https://www.notion.so/130a920890b18048a049ec67f4bfb589" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/130a920890b18048a049ec67f4bfb589"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">鉴权</span></span></h3><div id="https://www.notion.so/130a920890b180609c41dfe8a8e5ddb2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">扫码支付最终会用买家的银行卡进行支付。在你开始扫码支付之前，第三方公司需要核实你是否有这张卡的使用权，俗称“绑卡”。</span></span></p></div><div id="https://www.notion.so/130a920890b180d9815cc5579767992f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">那第三方公司是怎么验证用户的使用权呢？</span></span></p></div><div id="https://www.notion.so/130a920890b180f08101ee6ab37bea3f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在国内，我们一般采用下面这 4 个要素来进行验证：用户姓名用户身份证号码银行卡号码银行注册的手机号这 4 个要素都是银行记录的信息，因此虽然看起来你是在第三方支付公司的 App 上进行绑卡操作，其实是银行在背后进行相关信息的验证工作。</span></span></p></div><div id="https://www.notion.so/130a920890b180f8a73cd384d61d0963" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">由于这 4 个要素都是电子信息，可能会被人盗用，所以为了进一步增强安全性，银行在验证手机号码的时候还需要验证你是否拥有这个手机号码。具体的方式是发一条验证码给在你在银行柜台办借记卡时注册的手机号码。</span></span></p></div><div id="https://www.notion.so/130a920890b18017a32bc7c7cd4f4a45" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/130a920890b18030bf74cec96688a7b9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">结合前面的内容，我们可以把鉴权的过程分为 4 步：</span></span></p></div><div id="https://www.notion.so/130a920890b180d28daaeaa3f5e2d55b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">第 1 步，用户填写前 3 个要素和手机号码；</span></span></p></div><div id="https://www.notion.so/130a920890b1808bb4b7d8a160a6979b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">第 2 步，银行发短信验证码给用户手机号；</span></span></p></div><div id="https://www.notion.so/130a920890b180a6ae7efa65649812e1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">第 3 步，用户将前 3 个要素和短信验证码发给第三方支付公司；</span></span></p></div><div id="https://www.notion.so/130a920890b180f489d9d3fb6eeda6bd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">第 4 步，第三方支付公司再将所有信息发送给银行进行确认。</span></span></p></div><div id="https://www.notion.so/130a920890b1802b81e0d7f363458c96" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">所以鉴权的过程其实是验证了 5 个信息，其中 4 个是静态信息，1 个是动态信息。在用户绑卡通过之后，银行会返回给第三方支付公司这个用户的内部 ID 信息（也叫 Token）。之后第三方支付公司就可以拿这个 ID 进行所有合法的操作。刚才给你讲解的流程示意图如下：</span></span></p></div><div id="https://www.notion.so/130a920890b180589fe5ff9e7660cc0f" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2Fd9cc7871-27f4-4afb-9282-e76805228227%2F59bef589edd40a17ccfb71b2334b9132.webp?width=1112.1875&amp;table=block&amp;id=130a9208-90b1-8058-9fe5-ff9e7660cc0f"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2Fd9cc7871-27f4-4afb-9282-e76805228227%2F59bef589edd40a17ccfb71b2334b9132.webp?width=1112.1875&amp;table=block&amp;id=130a9208-90b1-8058-9fe5-ff9e7660cc0f" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/130a920890b180d79200fb2d133acba3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/130a920890b18004b29feea770959afe" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/130a920890b18004b29feea770959afe"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">支付</span></span></h3><div id="https://www.notion.so/130a920890b180fa859fce4ecd2c1c61" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">鉴权完成之后，就可以扫二维码，进行支付了。二维码其实是一个图形化的字符串，背后是这笔交易对应的订单。当用户点击“确认”之后，就会开始整个支付流程。</span></span></p></div><div id="https://www.notion.so/130a920890b180debe5ad7c174687880" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/130a920890b1802d88c7f5e121e76ba1" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/130a920890b1802d88c7f5e121e76ba1"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">拉取支付状态</span></span></h3><div id="https://www.notion.so/130a920890b18007a759ef8c66e51208" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">那为什么需要拉取支付状态呢？</span></span></p></div><div id="https://www.notion.so/130a920890b180929c8ac375b9389385" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">我们还是从台前转到幕后，从系统功能的角度思考。用户 App 的支付确认按钮是有局限的，它只能确认后台是否已经收到了支付请求，并不能确认支付是否已经成功。这是因为支付后台需要花一些时间和银行沟通，在这个期间后台并不知道银行的支付流程进行到了哪一步。</span></span></p></div><div id="https://www.notion.so/130a920890b1800799b4d241f8b92727" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">由于不知道支付什么时候才能完成，用户 App 需要每隔一段时间就向支付后台拉取交易情况，我们通常会把这个过程叫作</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">轮询</strong></span><span class="SemanticString">。这个过程一般在几百毫秒内就能结束，所以你一般察觉不到延时。</span></span></p></div><div id="https://www.notion.so/130a920890b180919551f0c27ef8d13a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">那为什么会出现轮询这种系统对接方式呢？金融机构每天会面对大量的用户资金操作，这些操作的时间和频率有很大的偶然性。</span></span></p></div><div id="https://www.notion.so/130a920890b18092b19ec53c2ae15350" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/130a920890b1803dbcbef42389eb91d1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">为了应对用户操作的峰值情况，</span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedBg SemanticString__Fragment--BgOrange">金融机构普遍通过异步消息处理的架构来对极端流量进行削峰填谷</mark></span><span class="SemanticString">。如果流量突然增大，异步消息架构会缓存所有请求，慢慢处理。这样就能避免核心金融系统超载。异步消息架构的结果就是用户不会及时得到处理结果，需要自己不断地去查询处理情况。</span></span></p></div><div id="https://www.notion.so/130a920890b1800c9ae2fc807da2cf13" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">当银行处理完支付后，银行会把支付成功的消息推送给用户和第三方支付公司。第三方支付公司也会推送给你支付成功的消息。所以你在扫码支付成功后，通常还能听到两个手机消息通知的声音。</span></span></p></div><div id="https://www.notion.so/130a920890b180d5ac3fed556cb98482" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">到这里我们看到了两种不同的获取最新状态的方式。</span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedBg SemanticString__Fragment--BgOrange">一种是用户定期去拉取状态，另一种是服务器将状态消息实时推送给用户</mark></span><span class="SemanticString">。这种推拉结合的消息通知方式，其实是架构设计中常见的异步系统处理方式。支付状态获取的流程图如下</span></span></p></div><div id="https://www.notion.so/130a920890b180afaf31ec1bd815b944" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2F87cdd781-6cdd-458f-ba06-f9541ba9b52f%2Fcc4e483abaf4a4b12a741fec9bb30bb1.webp?width=3200&amp;table=block&amp;id=130a9208-90b1-80af-af31-ec1bd815b944"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2F87cdd781-6cdd-458f-ba06-f9541ba9b52f%2Fcc4e483abaf4a4b12a741fec9bb30bb1.webp?width=3200&amp;table=block&amp;id=130a9208-90b1-80af-af31-ec1bd815b944" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/130a920890b1804d9762fdda80bdbf9e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/130a920890b1804d9762fdda80bdbf9e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">本币代收</span></span></h2><div id="https://www.notion.so/130a920890b180a6af3fce4b3ddff042" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">前面我们假设了这笔支付涉及到外汇交易，由于买家的和卖家使用的币种不同，就无法直接转账。这时候就需要第三方支付公司这个中间人来帮忙了。中间人角色要做 3 件事情：</span></span></p></div><div id="https://www.notion.so/130a920890b180f5b119cc0343b29b61" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">1. 本币代收</span></span></p></div><div id="https://www.notion.so/130a920890b180728be3d07f913bd811" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">2. 外汇交易</span></span></p></div><div id="https://www.notion.so/130a920890b180429760d74324d331fb" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">3. 外币代付</span></span></p></div><div id="https://www.notion.so/130a920890b18099b4e4e5dfca249f41" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/130a920890b18072ba22e1109722a3a8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">我先给你说说本币代收，也就是第三方支付公司代收用户资金。通俗一点来说，本币代收就是将你该付的钱先打到第三方支付公司账上。</span></span></p></div><div id="https://www.notion.so/130a920890b180488b5fd9d79bf2827a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">由于第三方支付公司的账号和买家的银行卡在两家不同的银行，本币代收需要进行跨行转账。跨行转账会涉及到整个银行系统的大小额系统和超级网银等，非常复杂。所以这里我们对场景进行一些简化，但是会和现实有一些出入，主要是方便你理解。</span></span></p></div><div id="https://www.notion.so/130a920890b180a8b81bc564ecabafbe" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/130a920890b1809ba1fdfc02f51958b4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/130a920890b1809ba1fdfc02f51958b4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">央行和清算机构</span></span></h3><div id="https://www.notion.so/130a920890b1802d815fe2c5804b6361" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">跨行转账的时候，钱是在不同的银行。因此我们想要实现跨行转账，就需要解决两个问题:</span></span></p></div><div id="https://www.notion.so/130a920890b180039e63fec45a569438" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">第一个问题是怎么将钱在两家银行之间转来转去，另一个问题是转的金额是多少</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/130a920890b18000b541c5fd6c83a06a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">我们先看第一个问题，那就是怎么跨行搬钱。最直接的方法是用汽车将钱从一家银行的金库搬到另一家银行。但这个方法其实不太实用，汽车能运的钱重量有限，路上也不太安全。所以钱最好不要挪动地方。这时候又需要另一个第三方机构出马了。所有银行都在这个新的第三方机构里放足够多的钱，一般叫做存款准备金。</span></span></p></div><div id="https://www.notion.so/130a920890b18037a54cd189f7a0faac" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">当两家银行之间需要转账的时候，第三方机构在内部搬运一下就好。比如美国的黄金交易所就是这种工作模式，每个客户都有自己专属的黄金仓库，很多小车在仓库之间搬运黄金。</span></span></p></div><div id="https://www.notion.so/130a920890b180129bdbe0a7e80512c8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">如果这个第三方机构足够可信，那么连内部搬运都不需要。这个第三方机构只需要记录一下谁的钱有多少，以及从哪里搬了多少到另一个地方就行。信用级别最高的金融机构就是国家的中央银行，简称央行。所以央行解决了真实资金的转移问题。</span></span></p></div><div id="https://www.notion.so/130a920890b180d98ce2cec2f2a15e12" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/130a920890b180dabeccc3617fd8daa7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">我们再来看另一个问题，那就是怎么知道转移的金额有多少。</span></span></p></div><div id="https://www.notion.so/130a920890b180fb8a51d47061e3d3aa" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">会有这个问题的原因是每天银行之间的跨行交易非常多，不可能每一笔都通过央行转一次钱。</span></span></p></div><div id="https://www.notion.so/130a920890b180e5a7baf1ba9530119d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">所以银行系统对跨行转账的流程进行了优化。那就是在白天只做记录，不进行任何实质性的跨行转账。等每天结束的时候计算一下两个银行之间交易金额的差额是多少，最后通过央行进行一笔跨行转账就可以了。</span></span></p></div><div id="https://www.notion.so/130a920890b1804c9004e8920d975ce7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">这种计算交易差额的方式叫做轧差</strong></span><span class="SemanticString">。这个</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">记录白天跨行转账细节和晚上进行交易轧差的第三方机构叫作清算机构</strong></span><span class="SemanticString">。你熟悉的银联及网联，以及国外的万事达，它们都是清算机构。前面我们在介绍拉取支付状态的时候，讲过金融系统采用异步消息处理架构应对支付流量。轧差是另一种金融机构应对大流量的一种处理方式。</span></span></p></div><div id="https://www.notion.so/130a920890b180149d22eef8237c9914" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">轧差的本质是实时消息的批量处理，从某种程度来讲是延时更大的异步处理框架</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/130a920890b180f6b8edf1d6309623d1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h2 id="https://www.notion.so/130a920890b180e984fef3f014c20e56" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/130a920890b180e984fef3f014c20e56"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">跨行转账</span></span></h2><div id="https://www.notion.so/130a920890b180d3bf01e3c97d5e1222" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">流程讲完央行和清算机构之后，我们就可以对跨行转账过程做一个详细的梳理了。整个过程分为七步：</span></span></p></div><div id="https://www.notion.so/130a920890b180e4a4e5e1e8b8b6f326" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">第一步，第三方支付公司发送指令给第三方开户行，要求将钱从用户的买家开户行转到第三方开户行。</span></span></p></div><div id="https://www.notion.so/130a920890b180bab678d5dfd4f9bfb0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">第二步，第三方支付公司拥有用户在买家开户行的 Token，所以可以合法发起这笔转账。跨行转账流程开始。</span></span></p></div><div id="https://www.notion.so/130a920890b1804c8b3bc752dc3e5438" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">第三步，第三方开户行将所有信息交给清算机构。清算机构作为第三方负责记录这些信息，并通知买家开户行和第三方开户行记录这笔转账。</span></span></p></div><div id="https://www.notion.so/130a920890b1803fbdc5debb69751b3d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">第四步，买家开户行记录的结果是对用户的账号进行扣款。扣款结束后用短信的方式通知用户。</span></span></p></div><div id="https://www.notion.so/130a920890b180c184e1c6505f6439c0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">第五步，第三方开户行记录的结果是对第三方支付公司的账号进行打款。打款结束后第三方支付公司可以通过银行网页看到对公账户金额发生变化。白天的工作到此结束。此时买家开户行的账面上的资金虽然减少，但是减少的钱并没有实质性到达第三方开户行。</span></span></p></div><div id="https://www.notion.so/130a920890b18012aaa6cd648d9b40b1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">第六步，到了晚上，清算机构对白天发生的交易进行盘存，发现有一笔从买家开户行到第三方开户行的跨行转账还没有真正完成。清算机构会将这笔未完成的跨行转账信息发送给央行。</span></span></p></div><div id="https://www.notion.so/130a920890b180f5a28ff7c643b2947b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">最后一步，央行收到信息之后，将买家开户行在央行的存款准备金调低，并将第三方开户行在央行的存款准备金调高。这样钱就真正地从买家开户行转到了第三方开户行。这七步的示意图如下：</span></span></p></div><div id="https://www.notion.so/130a920890b180e88af9eb5152883215" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2Fe62c61be-2662-4d5f-9e9d-bfe24ddcc082%2Fa05832c24e6370d3096c27cb3a6f5944.webp?width=1112.1875&amp;table=block&amp;id=130a9208-90b1-80e8-8af9-eb5152883215"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2Fe62c61be-2662-4d5f-9e9d-bfe24ddcc082%2Fa05832c24e6370d3096c27cb3a6f5944.webp?width=1112.1875&amp;table=block&amp;id=130a9208-90b1-80e8-8af9-eb5152883215" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/130a920890b180db9026f928998c8fb8" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/130a920890b180db9026f928998c8fb8"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">外汇交易</span></span></h2><div id="https://www.notion.so/130a920890b180fcb6d5dfc3c9127295" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">转账交易的第二步是第三方支付公司进行外汇交易。当第三方支付公司完成了用户的本币代扣之后，第三方支付公司账上就有了对应的人民币。接下来的一步是将这些人民币变成美元，这样才能将美元转给国外的卖家。那么外汇交易的过程又是怎样的呢？按照交易量的大小，可以分为</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"> C 端外汇零售业务</strong></span><span class="SemanticString">和 </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">B 端外汇批发业务</strong></span><span class="SemanticString">两个部分。</span></span></p></div><div id="https://www.notion.so/130a920890b180e6b6f7db1256e719b3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/130a920890b180d2bd84e72b8026474d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/130a920890b180d2bd84e72b8026474d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">C 端外汇零售业务</span></span></h3><div id="https://www.notion.so/130a920890b18029a613f4f70156c373" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">外汇交易和电商一样，也是一个买卖的过程。第三方支付公司作为中间人，需要用人民币购买美元。那美元从哪里购买呢？人民币有外汇管制，不能随意买卖，需要通过一些有特殊资质的银行才行。如果外汇不涉及到人民币，那么选择面会宽泛很多，银行、投行或者其他金融机构都可以。</span></span></p></div><div id="https://www.notion.so/130a920890b180309660d9655f70485e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">账务原理建议一个账号只处理同一个币种的交易</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/130a920890b18063a81cd012071240bb" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">外汇交易涉及到两个币种的货币，因此需要两个不同的账号。</span></span></p></div><div id="https://www.notion.so/130a920890b1801598b8c0a91a5e805e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">假设了第三方支付公司是通过汇兑提供行进行外汇交易的。那么第三方公司需要在汇兑提供行里建两个账号，一个人民币账号和一个美元账号。</span></span></p></div><div id="https://www.notion.so/130a920890b1808fbee5d32db41f9968" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">同时，汇兑提供行内部也需要有对应两个币种的账号，一个对应着人民币资金池，另一个则是美元资金池。所以，一笔外币的购买涉及到 4 个账号之间的 2 笔支付订单。交易过程的示意图如下：</span></span></p></div><div id="https://www.notion.so/130a920890b180399a4edcc5507682d5" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2F711f5307-10b0-4b75-8274-fb0501e9f668%2F3359eb5e5b0d08c3a1cc5bb27b2ec512.webp?width=1112.175048828125&amp;table=block&amp;id=130a9208-90b1-8039-9a4e-dcc5507682d5"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2F711f5307-10b0-4b75-8274-fb0501e9f668%2F3359eb5e5b0d08c3a1cc5bb27b2ec512.webp?width=1112.175048828125&amp;table=block&amp;id=130a9208-90b1-8039-9a4e-dcc5507682d5" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/130a920890b18019afd3e3cb038b18ac" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/130a920890b1806ebad6c38f91ae278d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">外汇交易完成之后，第三方支付公司在汇兑提供行的人民币账户金额减少，美元账户金额增加。这样第三方支付公司就有了足够的美元来支付给卖家。</span></span></p></div><div id="https://www.notion.so/130a920890b1806e9196f30580fba1ed" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">我们需要注意的是，外汇交易是有成本的。第一个成本是</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">时间成本</strong></span><span class="SemanticString">。当天购买的外汇可能隔天才到账。</span></span></p></div><div id="https://www.notion.so/130a920890b180619e04f76f1a4a30cd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">另一个成本是</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">交易成本</strong></span><span class="SemanticString">。外汇交易一般会按照交易次数收费。</span></span></p></div><div id="https://www.notion.so/130a920890b1806ea69cd54df1692a64" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">因此为了节省成本，第三方支付公司通常会提前购买大量的外汇，用来应对日间的业务。只有当外汇储备下降到警戒线之后再做下一笔大额外汇的购买。</span></span></p></div><div id="https://www.notion.so/130a920890b180ca93dffd477d7fbb48" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">讲到这里，我们解决了第三方支付公司美元账户不足的问题，但是它用来购汇的人民币账户一直在往外出钱，总会有枯竭的一天，又该怎么办呢。</span></span></p></div><div id="https://www.notion.so/130a920890b1803fad73fb6d2e2232d1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">所以我们还需要考虑从外部调资金进来。由于第三方支付公司的备付金账户在第三方开户行，因此需要做从第三方开户行到汇兑提供行的跨行转账，示意图如下：</span></span></p></div><div id="https://www.notion.so/130a920890b18081b73de51b5d86d82b" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2F29aeaed5-7451-49b5-8f03-fdc586bd36d3%2F75a91b3a675a8a1db40499cf2275fd84.webp?width=1112.175048828125&amp;table=block&amp;id=130a9208-90b1-8081-b73d-e51b5d86d82b"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2F29aeaed5-7451-49b5-8f03-fdc586bd36d3%2F75a91b3a675a8a1db40499cf2275fd84.webp?width=1112.175048828125&amp;table=block&amp;id=130a9208-90b1-8081-b73d-e51b5d86d82b" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/130a920890b1808284e4f0c0d4b00155" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/130a920890b180d59c84cdd92968ef93" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">但是第三方公司在</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">第三方开户行</strong></span><span class="SemanticString">的账户也在一直出钱，我们往上推演一步，就会发现第三方开户行账户也需要有进来资金的渠道。这个是由前面我们提到的本币代收的过程实现的。我们把买家出资的流程补充完整。整个过程的示意图如下：</span></span></p></div><div id="https://www.notion.so/130a920890b18049920bf4075b672be0" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2F4d2cb0d8-c6ac-4c25-9302-c80cd85756f6%2F0a01f80965bcb884cd488e1ee50712d3.webp?width=1112.175048828125&amp;table=block&amp;id=130a9208-90b1-8049-920b-f4075b672be0"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2F4d2cb0d8-c6ac-4c25-9302-c80cd85756f6%2F0a01f80965bcb884cd488e1ee50712d3.webp?width=1112.175048828125&amp;table=block&amp;id=130a9208-90b1-8049-920b-f4075b672be0" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/130a920890b18050b445e29be2f26d4b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/130a920890b180ea81a1d43d900f33b0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">这样梳理下来，你是不是觉得我们已经考虑得足够全面了呢？</span></span></p></div><div id="https://www.notion.so/130a920890b180b8a0a8fce3853fdcc8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">其实这里还有一个问题需要我们考虑：汇兑提供行帮助第三方支付公司实现了外汇购买。但是汇兑提供行的美元账户一直在出钱。那这个美元账户钱不够了怎么办？这时候汇兑提供行需要从其他银行寻求帮助。这个过程就涉及到了 B 端外汇批发交易。</span></span></p></div><div id="https://www.notion.so/130a920890b180af85d3f18d4ebad848" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h2 id="https://www.notion.so/130a920890b1805a936adcb3016379fc" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/130a920890b1805a936adcb3016379fc"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">B 端外汇批发业务</span></span></h2><div id="https://www.notion.so/130a920890b1808db65ed7451d17fbff" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">前面提到的电商相关的外汇交易属于外汇的零售业务。银行、投行和其他外汇提供商之间形成了一个有层级的跨国组织，专门从事外汇的批发业务。批发业务的业务量非常巨大，通常每天都有几万亿美元的规模。</span></span></p></div><div id="https://www.notion.so/130a920890b180f1821cc957272e76b2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">外汇市场是按照交易量大小来划分层次的。最底层的是面对终端用户的外汇零售商。这些零售商负责给一般用户提供小额的外汇交易。这些小笔的外汇交易汇集在一起之后，就会形成一笔大的外汇订单，然后继续往上层交易。</span></span></p></div><div id="https://www.notion.so/130a920890b1805b8b76c8875348ba84" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">和底层的外汇零售商一样，上一层的机构将所有外汇交易汇集在一起之后，形成更大的外汇订单，再往更上一层交易。一直往上汇集这种事情不会永无止境地进行下去。</span></span></p></div><div id="https://www.notion.so/130a920890b180ec9e58cbdebad5c361" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">这个流程的尽头是全球最大的</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">外汇做市商</strong></span><span class="SemanticString">，一般是巨型的跨国商业银行。这些跨国商业银行面对的是全球不同国家大量的储蓄用户，所以它们手上就拥有不同币种的巨额存款。这些做市商之间通过交换不同币种的大额固定利息存折来实现外汇交易，从而决定最终汇率。示意图如下：</span></span></p></div><div id="https://www.notion.so/130a920890b1803289b6f535abf16057" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2Fa602e8a2-c8a5-40d8-811f-b8dd04590b10%2F92c49aa31fc90f61f15a962f94ddd6fa.webp?width=1112.1875&amp;table=block&amp;id=130a9208-90b1-8032-89b6-f535abf16057"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2Fa602e8a2-c8a5-40d8-811f-b8dd04590b10%2F92c49aa31fc90f61f15a962f94ddd6fa.webp?width=1112.1875&amp;table=block&amp;id=130a9208-90b1-8032-89b6-f535abf16057" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/130a920890b18081b7b0de3a7b52853d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/130a920890b18088abd1ee4b88b911b4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">之前我给你提到过外汇交易有时间成本，当天购买的外汇需要隔天才能到账。在这一天的时间间隔之内，外汇市场可能会有巨大的波动，从而造成金融机构账面上的资金亏损。所以，参与外汇业务的金融机构都会处理外汇相关的市场风险，比如用期货、期权等衍生品来对冲风险。这些金融衍生品，我们会在后面的章节详细展开，这里你先有个印象就行。</span></span></p></div><div id="https://www.notion.so/130a920890b180d29857fae7e8dee84a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">为了方便你理解，我们把到目前为止的流程画一个简单的示意图：</span></span></p></div><div id="https://www.notion.so/130a920890b180e485cbdc05b768bf42" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2F7df6e9ad-4a40-4416-9ccd-6b04b69af90e%2F4c3dd63bf3be60824c525007bd270e12.webp?width=1112.1875&amp;table=block&amp;id=130a9208-90b1-80e4-85cb-dc05b768bf42"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2F7df6e9ad-4a40-4416-9ccd-6b04b69af90e%2F4c3dd63bf3be60824c525007bd270e12.webp?width=1112.1875&amp;table=block&amp;id=130a9208-90b1-80e4-85cb-dc05b768bf42" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/130a920890b18058a33cdaec3f5e729f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/130a920890b18058a33cdaec3f5e729f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">外币代付</span></span></h2><div id="https://www.notion.so/130a920890b180a8a0acf96972e9370c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">外币代付流程和本币代收流程在原则上是一样的。不同点在于外币代付的金额是美元，流出账号是第三方支付公司的美元账号。由于卖家的账号在</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">卖家开户行</strong></span><span class="SemanticString">，第三方支付的美元账号在</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">汇兑提供行</strong></span><span class="SemanticString">，这时候需要走的是国际的清结算过程。流程的核心思想和之前的类似，只是具体的细节会更加复杂。下图展示了简化版的支付流程。</span></span></p></div><div id="https://www.notion.so/130a920890b1807eb26cdaf4120f5872" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2Ff6a9e13a-62c4-4cfe-b0dc-a417eee6356e%2Fb56afd2d461efef5e2757d37b6bafd21.webp?width=1112.175048828125&amp;table=block&amp;id=130a9208-90b1-807e-b26c-daf4120f5872"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2Ff6a9e13a-62c4-4cfe-b0dc-a417eee6356e%2Fb56afd2d461efef5e2757d37b6bafd21.webp?width=1112.175048828125&amp;table=block&amp;id=130a9208-90b1-807e-b26c-daf4120f5872" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/130a920890b1800f9751fafba4320c91" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h2 id="https://www.notion.so/130a920890b18032b4cef2b73e4b7273" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/130a920890b18032b4cef2b73e4b7273"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">小结</span></span></h2><div id="https://www.notion.so/130a920890b180b78e17e46298e27841" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">用户在扫码支付前需要证明自己合法拥有银行卡，需要给开卡行提供 </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">4 要素</strong></span><span class="SemanticString">：姓名、身份证、银行卡号和手机号。验证通过后便可以开始支付流程。支付完成后用户可以通过轮询的方式</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">异步获取支付状态</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/130a920890b18061b24ed29afca156c2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">异步处理是金融机构应对支付流量的一种架构设计。</span></span></p></div><div id="https://www.notion.so/130a920890b1808fa0e6c48b503b5abc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在第三方支付公司收到支付请求后，开始进行本币代收业务。由于账号设立的关系，需要进行跨行转账。此时清算中心和央行一起提供了跨行转账功能。</span></span></p></div><div id="https://www.notion.so/130a920890b180d9bb69d69b50a50a0a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">跨行转账一般采用了日间交易、日终轧差结算的方式进行</strong></span><span class="SemanticString">。轧差处理是金融机构应对支付流量的另一种架构设计。</span></span></p></div><div id="https://www.notion.so/130a920890b180c888a6f3cadad23e89" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">第三方支付公司在完成本币代收业务之后，还要进行汇兑业务，具体分为外汇零售业务和批发业务。如果涉及外币代付业务，第三方支付公司还需要借助国际清结算组织的相关功能。</span></span></p></div><div id="https://www.notion.so/130a920890b180c0a53cd604c756cd8e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">你需要注意的是，二维码支付涉及的大多数环节都是异步系统，比如用户 App 的异步支付状态查询，以及清算中心和央行及银行之间的跨行转账清结算过程。异步系统不会将结果同步返回给调用方。因此，我们在设计系统的时候，就需要支持状态的查询以及状态消息的推送功能。</span></span></p></div><div id="https://www.notion.so/130a920890b180efa6b2ca5fb47cec6f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedBg SemanticString__Fragment--BgRed">总结脑图</mark></span></span></p></div><div id="https://www.notion.so/130a920890b180b3acacdf777a6011f8" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2Fb45f89fe-9540-4733-9566-06d394d30bd2%2F20321d2ec6c580db82f3f6yycc756ea9.jpg?width=1112.1875&amp;table=block&amp;id=130a9208-90b1-80b3-acac-df777a6011f8"><img src="https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F333b4f28-5127-4daf-8c39-ec7700f99e1b%2Fb45f89fe-9540-4733-9566-06d394d30bd2%2F20321d2ec6c580db82f3f6yycc756ea9.jpg?width=1112.1875&amp;table=block&amp;id=130a9208-90b1-80b3-acac-df777a6011f8" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/130a920890b180299c41f797c65b70bc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/130a920890b180a09638ce1111f90404" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">（原文：</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://time.geekbang.org/column/article/323701">https://time.geekbang.org/column/article/323701</a></span><span class="SemanticString">）</span></span></p></div><div id="https://www.notion.so/130a920890b180549d94e5c60892455c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></article>
  <footer class="Footer">
  <div>&copy; 锡安的自留地 2024</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>

</body>

</html>