<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🦜&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>0011 设计模式之结构型模式&nbsp;|&nbsp;锡安的自留地</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="0011 设计模式之结构型模式">
  
    <meta name="description" content="介绍和实践了结构型模式。">
    <meta property="og:description" content="介绍和实践了结构型模式。">
  
  
    <meta property="og:image" content="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🥥&lt;/text&gt;&lt;/svg&gt;">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🦜&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="e48d9ceebf4c4de2b657c3a3d1d308f4.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🧰&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>工具</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🎏&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>关于我</span>
        </div>
      </a>
    
  
</nav>
  <header class="Header">
    
      <div class="Header__Cover">
        <img src="https://images.unsplash.com/photo-1616578273577-5d54546f4dec?ixlib=rb-1.2.1&amp;q=80&amp;cs=tinysrgb&amp;fm=jpg&amp;crop=entropy">
      </div>
    
    <div class="Header__Spacer ">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🥥&lt;/text&gt;&lt;/svg&gt;"></span>
      </div>
    
    <h1 class="Header__Title">0011 设计模式之结构型模式</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Sun, Jun 5, 2022</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--gray">
            <a href="tag/设计模式.html">设计模式</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--gray">
            <a href="tag/JAVA.html">JAVA</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/8ed41d8825de4fe099785e14e3fe0efb" class="PageRoot"><div id="https://www.notion.so/cdfaa96bf5834ea5aa37e289c449bf2e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">本节将介绍设计模式中的另一个大类——结构性模式。</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/e3f06f8441d3414fa1adab4c0ee8e7cb" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">适配器模式(Adapter)</strong></span><span class="SemanticString">重要程度：4</span></span></li><li id="https://www.notion.so/5848f07eadf24d378b9be11614995cdf" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">桥接模式(Bridge)</strong></span><span class="SemanticString">重要程度：3</span></span></li><li id="https://www.notion.so/0308d46a53aa4ad1a38dd86e5542cd71" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">组合模式(Composite)</strong></span><span class="SemanticString">重要程度：4</span></span></li><li id="https://www.notion.so/3fe8d08d56b84a2d968344b52a18c5a5" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">装饰模式(Decorator)</strong></span><span class="SemanticString">重要程度：3</span></span></li><li id="https://www.notion.so/467272e2dfda49d6bf06b31058803e92" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">外观模式(Facade)</strong></span><span class="SemanticString">重要程度：5</span></span></li><li id="https://www.notion.so/2482e56e30554180849439765e89fac8" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">享元模式(Flyweight)</strong></span><span class="SemanticString">重要程度：1</span></span></li><li id="https://www.notion.so/9f738efdba1048de8a80a38ccfb57b95" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">代理模式(Proxy)</strong></span><span class="SemanticString">重要程度：4</span></span></li></ul><h1 id="https://www.notion.so/88699d6246794f019ed2633429226d39" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/88699d6246794f019ed2633429226d39"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue">1、适配器模式</mark></span></span></h1><h2 id="https://www.notion.so/e98215c856494ce9b330f65338033e71" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/e98215c856494ce9b330f65338033e71"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">1.1 定义</span></span></h2><div id="https://www.notion.so/23a3493c04f94880ac4c834fb6a5bed5" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">🥝</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString">适配器模式(Adapter Pattern) ：将一个接口转换成客户希望的另一个接口，适配器模式使接口不兼容的那些类可以一起工作，其别名为包装器(Wrapper)。适配器模式既可以作为类结构型模式，也可以作为对象结构型模式。</span></span></p></div><div id="https://www.notion.so/c818f477b1bd44c3a834f5ec45f69711" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">适配器模式包含如下角色：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/32a0e326bce045bc97aa9c22c4e19374" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Target：目标抽象类     即我们可以直接使用的类</span></span></li><li id="https://www.notion.so/a4c5f5190ad541ba9e9bbe7ba3b11123" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Adapter：适配器类      </span></span></li><li id="https://www.notion.so/af89ab30dc2e4d699c8a896b2c7ff430" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Adaptee：适配者类    即我们不能直接使用的类</span></span></li><li id="https://www.notion.so/9456c76a150e4bfc9895b4fd8cd6bfe6" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Client：客户类</span></span></li></ul><div id="https://www.notion.so/909349d751d749d086fbfa1d7dc67eaa" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/5058c4ed2088490288d60975f1697fe1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">适配器模式有对象适配器和类适配器两种实现：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/766e088306004221881c81ccf577a00a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">对象适配器</strong></span><span class="SemanticString">：</span></span></li></ul><div id="https://www.notion.so/b503293ba6634baabde31fcbc8867217" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F7d6b0be6-d461-4cb4-a351-241be7974aea%2FAdapter.jpg?width=724&amp;table=block&amp;id=b503293b-a663-4baa-bde3-1fcbc8867217"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F7d6b0be6-d461-4cb4-a351-241be7974aea%2FAdapter.jpg?width=724&amp;table=block&amp;id=b503293b-a663-4baa-bde3-1fcbc8867217" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/305a828e163f495c8f910ac909ce647c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/e0c4b11792f940ce94714dd646029d15" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">类适配器</strong></span><span class="SemanticString">：</span></span></li></ul><div id="https://www.notion.so/11caa3b5b06448159d1761a0e98f0c4c" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fb4d7e060-0024-4c5b-af58-ed4bb2526ffc%2FAdapter_classModel.jpg?width=663&amp;table=block&amp;id=11caa3b5-b064-4815-9d17-61a0e98f0c4c"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fb4d7e060-0024-4c5b-af58-ed4bb2526ffc%2FAdapter_classModel.jpg?width=663&amp;table=block&amp;id=11caa3b5-b064-4815-9d17-61a0e98f0c4c" style="width:663px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/8d059838f4134f1e93dc614f7d872558" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">时序图</strong></span></span></li></ul><div id="https://www.notion.so/4d6080b909924bceb6e37251e9edfc6a" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F8143f515-15ee-439d-a7b3-2c1efb972e01%2Fseq_Adapter.jpg?width=454&amp;table=block&amp;id=4d6080b9-0992-4bce-b6e3-7251e9edfc6a"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F8143f515-15ee-439d-a7b3-2c1efb972e01%2Fseq_Adapter.jpg?width=454&amp;table=block&amp;id=4d6080b9-0992-4bce-b6e3-7251e9edfc6a" style="width:454px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/295423a3d0da4a858932c681927cbb28" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/295423a3d0da4a858932c681927cbb28"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">1.2 实践</span></span></h2><div id="https://www.notion.so/cda0f7e34d694a6a8d83dbf3f33c5196" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">我们来看一下代码实现。</span></span></p></div><div id="https://www.notion.so/f795750757714257be92ea35c772b18f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">首先编写 </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Target 接口</strong></span><span class="SemanticString">(这是客户所期待的接口。目标可以是具体的或抽象的类，也可以是接口)代码如下：</span></span></p></div><pre id="https://www.notion.so/cac63e673aa044719a6c5e570e16b7d8" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">adapter</span><span class="token punctuation">;</span>
<span class="token comment">/**
*@Desc: 目标类接口
*/</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Target</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/2147cafdaeff400181db9805c9bb79b2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/59022079fa76403c8021941ebcaf6a10" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">需要适配的类Adaptee代码如下：</span></span></p></div><pre id="https://www.notion.so/4a497118c18b4614b14fe514fbc5e6d4" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">adapter</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 需要适配的类
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Adaptee</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">specialRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"specialRequest() | this is a real request from adaptee!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/957ec988d2dc4faa8e991ad97255d39a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/2a5ff61081984277a7fa9d046fdd500d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Adapter</strong></span><span class="SemanticString">(通过在内部包装一个Adaptee对象，把源对象接口转换成目标接口)代码如下:</span></span></p></div><pre id="https://www.notion.so/826a074cc5b14bdd98ac00d507b88611" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">adapter</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 对象适配器
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Adapter</span> <span class="token keyword">implements</span> <span class="token class-name">Target</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Adaptee</span> adaptee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Adaptee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 通过specialRequest 对 request 进行适配</span>
        adaptee<span class="token punctuation">.</span><span class="token function">specialRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/77c3e2126b8941a5a9dd96e1eff985c2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"> 因此我们使用的时候如下：</span></span></p></div><pre id="https://www.notion.so/e82e370ff69548f7bb14f82d913ea34d" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">adapter</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestEntrance</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Target</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Adapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        target<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/3c34c69182e44db4bce3c322bf1e39b7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">我们来测试一下：</span></span></p></div><pre id="https://www.notion.so/ffaaf02e34b04b4488f6cd7caa12ebbf" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">adapter</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestEntrance</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Target</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Adapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        target<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/ee639956fbe14462b5fe60c81d6873e4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">输出：</span></span></p></div><blockquote id="https://www.notion.so/a15f228d027345019c3649372e970110" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedBg SemanticString__Fragment--BgGray">specialRequest() | this is a real request from adaptee!</mark></span></span></blockquote><div id="https://www.notion.so/5d3de4f46b4340c6b3853ff03c2b15af" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/ed753b364b9f40cc9023a133625d380a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">另一种实现方式是使用</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><code class="SemanticString__Fragment SemanticString__Fragment--Code">类适配器</code></strong></span><span class="SemanticString">，与</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><code class="SemanticString__Fragment SemanticString__Fragment--Code">对象适配器</code></strong></span><span class="SemanticString">模式不同的是，类适配器模式是使用继承关系连接到Adaptee类，而不是使用委派关系连接到Adaptee类。</span></span></p></div><pre id="https://www.notion.so/25504d3b452149a496fef0fb684e1bae" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">adapter</span><span class="token punctuation">;</span>

<span class="token comment">/**
*@Desc: 类适配器
*/</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Adapter2</span> <span class="token keyword">extends</span> <span class="token class-name">Adaptee</span> <span class="token keyword">implements</span> <span class="token class-name">Target</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">specialRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/6c682334ee304d26854429f128188d54" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">测试一下：</span></span></p></div><pre id="https://www.notion.so/975e3ade26174b78a06f9d94e3e5ae4e" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">adapter</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestEntrance</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAdapter2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Target</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Adapter2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        target<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/f7db4846cbd8484db0b61a8ea9356f69" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">输出与对象适配器完全一致。</span></span></p></div><h2 id="https://www.notion.so/6b2a204d6a13423abf090390ba898c67" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/6b2a204d6a13423abf090390ba898c67"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">1.3 优点</span></span></h2><ul class="BulletedListWrapper"><li id="https://www.notion.so/7eb4afe1d78a4c9c840e0d544084e649" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">将目标类和适配者类解耦，通过引入一个适配器类来重用现有的适配者类，而无须修改原有代码。</span></span></li><li id="https://www.notion.so/95c8943401bd488f8c845024510ee2dc" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">增加了类的透明性和复用性，将具体的实现封装在适配者类中，对于客户端类来说是透明的，而且提高了适配者的复用性。</span></span></li><li id="https://www.notion.so/88cca1ee3d3547b1ad8a7ab7c58ed5ed" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">灵活性和扩展性都非常好，通过使用配置文件，可以很方便地更换适配器，也可以在不修改原有代码的基础上增加新的适配器类，完全符合“开闭原则”。</span></span></li></ul><div id="https://www.notion.so/ea7d25857a964cbab4e89b30b93549f5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">类适配器模式还具有如下优点：</strong></span></span></p></div><div id="https://www.notion.so/aa31df905813403d8eb5ce56f1d097b5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">由于适配器类是适配者类的子类，因此可以在适配器类中置换一些适配者的方法，使得适配器的灵活性更强。</span></span></p></div><div id="https://www.notion.so/ca571cd6c8ef418ea22e1dc38b1b43b6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">对象适配器模式还具有如下优点：</strong></span><span class="SemanticString">一个对象适配器可以把多个不同的适配者适配到同一个目标，也就是说，同一个适配器可以把适配者类和它的子类都适配到目标接口。</span></span></p></div><h2 id="https://www.notion.so/e2a209be78804ac6b225567466e9df4b" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/e2a209be78804ac6b225567466e9df4b"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">1.4 缺点</strong></strong></span></span></h2><div id="https://www.notion.so/42363dcb2b5345e0a1ec153e406a5528" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">类适配器模式的缺点如下：</strong></span></span></p></div><div id="https://www.notion.so/bbd53bf930d9409e905ecad5ee50b21c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">对于Java、C#等不支持多重继承的语言，一次最多只能适配一个适配者类，而且目标抽象类只能为抽象类，不能为具体类，其使用有一定的局限性，不能将一个适配者类和它的子类都适配到目标接口。</span></span></p></div><div id="https://www.notion.so/3e74ca9c76754c53a9a5de7ac6b25a01" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">对象适配器模式的缺点如下：</strong></span><span class="SemanticString">与类适配器模式相比，要想置换适配者类的方法就不容易。如果一定要置换掉适配者类的一个或多个方法，就只好先做一个适配者类的子类，将适配者类的方法置换掉，然后再把适配者类的子类当做真正的适配者进行适配，实现过程较为复杂。</span></span></p></div><div id="https://www.notion.so/6fcca7842d8243dfb0d638a02cb49c80" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/f251a7a31e87479396564412270a8de1" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/f251a7a31e87479396564412270a8de1"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">2. 桥接模式</strong></strong></mark></span></span></h1><div id="https://www.notion.so/fc21c74d0ddb410ba4c8791a966a1a1e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">考虑这样的场景：</span></span></p></div><div id="https://www.notion.so/0d598188e3b245498f32c3024a9e7e47" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">要绘制矩形、圆形、椭圆、正方形，我们至少需要4个形状类，但是如果绘制的图形需要具有不同的颜色，如红色、绿色、蓝色等，此时至少有如下两种设计方案：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/9778f8853f01436c9e8fc5abcea53ba0" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">第一种设计方案是为每一种形状都提供一套各种颜色的版本。</span></span></li><li id="https://www.notion.so/550f580345994b32a2ae671e8ca7e121" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">第二种设计方案是根据实际需要对形状和颜色进行组合</span></span></li></ul><div id="https://www.notion.so/f7a4a7e1a0cc4d6aa71a7e23139bf56b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">对于有两个变化维度（即两个变化的原因）的系统，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><code class="SemanticString__Fragment SemanticString__Fragment--Code">采用方案二来进行设计系统中类的个数更少，且系统扩展更为方便</code></strong></span><span class="SemanticString">。设计方案二即是桥接模式的应用。</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">桥接模式将继承关系转换为关联关系</strong></code></span><span class="SemanticString">，从而降低了类与类之间的耦合，减少了代码编写量。</span></span></p></div><h2 id="https://www.notion.so/66ca6d89b368454fbe9249e0b78d93ef" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/66ca6d89b368454fbe9249e0b78d93ef"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">2.1 定义</span></span></h2><div id="https://www.notion.so/870881ac019249b982234b87541b0e81" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">🥝</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString">桥接模式(Bridge Pattern)：</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">将抽象部分与它的实现部分分离，使它们都可以独立地变化</strong></span><span class="SemanticString">。它是一种对象结构型模式，又称为柄体(Handle and Body)模式或接口(Interface)模式。</span></span></p></div><div id="https://www.notion.so/1ad73842caf542d686f8ad7c6e77bdd6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">桥接模式包含如下角色：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/96c0db9a4f57480fbd5fb98a346a5013" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Abstraction：抽象类</span></span></li><li id="https://www.notion.so/20568d406a114b35bb057528c7dfc954" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">RefinedAbstraction：</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">扩充抽象类</strong></span></span></li><li id="https://www.notion.so/eed00030839c4ea7ae866cdbeca3bfd5" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Implementor：实现类接口</span></span></li><li id="https://www.notion.so/94f56f53c9244ff897a067a546888c60" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">ConcreteImplementor：具体实现类</span></span></li></ul><div id="https://www.notion.so/07dd4bc2caa54689a6857139c01fcb7f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/9a7fae88a37c438e83d7c38197283ad7" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">UML图</strong></span></span></li></ul><div id="https://www.notion.so/c0f2ded2defc4d3e9df462125217eb17" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fbf6e4ff1-5abd-4daa-a9cc-ac2b9c985485%2FBridge.jpg?width=867&amp;table=block&amp;id=c0f2ded2-defc-4d3e-9df4-62125217eb17"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fbf6e4ff1-5abd-4daa-a9cc-ac2b9c985485%2FBridge.jpg?width=867&amp;table=block&amp;id=c0f2ded2-defc-4d3e-9df4-62125217eb17" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/32c7e1720dbf4b449dc85da252ba2808" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">时序图</strong></span></span></li></ul><div id="https://www.notion.so/624e984950ee4e7bb316be71464eadc3" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F7bbd41de-df17-42ea-b4b8-430210a68baa%2Fseq_Bridge.jpg?width=643&amp;table=block&amp;id=624e9849-50ee-4e7b-b316-be71464eadc3"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F7bbd41de-df17-42ea-b4b8-430210a68baa%2Fseq_Bridge.jpg?width=643&amp;table=block&amp;id=624e9849-50ee-4e7b-b316-be71464eadc3" style="width:643px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/581ff73633b74117a607f77dad24e5ab" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/581ff73633b74117a607f77dad24e5ab"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">2.2 实践</span></span></h2><div id="https://www.notion.so/2a1aeec0d0e7437fbc84cdf59654bb98" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">我们用桥接模式来实现开头中提到的案例：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/dfca6df4c4714f198f8be5a3dc6be5c0" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">绘制3种图型：矩形、圆形、椭圆</span></span></li><li id="https://www.notion.so/1f172c41ebcc4102bcb69ad393231dd7" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">可绘制的颜色有3种：红色、绿色、蓝色</span></span></li></ul><div id="https://www.notion.so/0b150d9bb1ae440d9a56fa0a62cee18e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">如何用一个桥接模式来实现呢？</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/ee889c457c554eadba83fd602f5c685c" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">颜色接口：</span></span></li></ul><pre id="https://www.notion.so/95673530afed435193b7259c83aef440" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">bridgepattern</span><span class="token punctuation">;</span>

<span class="token comment">/**
*@Desc: 对传入的形状上色接口
*/</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">paint</span><span class="token punctuation">(</span><span class="token class-name">String</span> shape<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/d4772ac3af994892bee4115946dff04d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/2d29444e8e2a4c669312d6c7635d9b0e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">形状的抽象类</span></span></li></ul><pre id="https://www.notion.so/b0a65379c16049dda548951c0d9eaa68" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">bridgepattern</span><span class="token punctuation">;</span>

<span class="token comment">/**
*@Desc: 形状抽象类
*/</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
    <span class="token comment">// 颜色</span>
    <span class="token class-name">Color</span> color<span class="token punctuation">;</span>

    <span class="token comment">// 绘制颜色的抽象方法</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Color</span> <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> color<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/ac124d975bd64bb58a5687d6ec8b5213" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">下面分别实现不同颜色：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/18407e6728b04ff9b3b23d5583296533" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">绿色：</span></span></li></ul><pre id="https://www.notion.so/3f0065848c384c8d8edd76fb3d7a3dce" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">bridgepattern<span class="token punctuation">.</span>color</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">bridgepattern<span class="token punctuation">.</span></span><span class="token class-name">Color</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Green</span> <span class="token keyword">implements</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">paint</span><span class="token punctuation">(</span><span class="token class-name">String</span> shape<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"绿色的"</span> <span class="token operator">+</span> shape<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><ul class="BulletedListWrapper"><li id="https://www.notion.so/48eb9baa30fa402794fddeb9fc484f63" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">红色</span></span></li></ul><pre id="https://www.notion.so/1d1fd71b8ff145dcb7399a84a388062b" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">bridgepattern<span class="token punctuation">.</span>color</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">bridgepattern<span class="token punctuation">.</span></span><span class="token class-name">Color</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Red</span> <span class="token keyword">implements</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">paint</span><span class="token punctuation">(</span><span class="token class-name">String</span> shape<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"红色的"</span> <span class="token operator">+</span> shape<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><ul class="BulletedListWrapper"><li id="https://www.notion.so/3ada8b3f271a4dae8e3b5b8c87c04609" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">蓝色</span></span></li></ul><pre id="https://www.notion.so/a74ebad539114eb28d186b16faa2719b" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">bridgepattern<span class="token punctuation">.</span>color</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">bridgepattern<span class="token punctuation">.</span></span><span class="token class-name">Color</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Blue</span> <span class="token keyword">implements</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">paint</span><span class="token punctuation">(</span><span class="token class-name">String</span> shape<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"蓝色的"</span> <span class="token operator">+</span> shape<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/1ced845cc010488787e82a19de481a47" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/6ef1a32b89a54ec497419528ec74f624" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">下面分别实现不同形状：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/147fe54ba2224d0293493bf88f712b6a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">圆</span></span></li></ul><pre id="https://www.notion.so/9ffb3b9f8f28431a85e12b2b42e09368" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">bridgepattern<span class="token punctuation">.</span>shape</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">bridgepattern<span class="token punctuation">.</span></span><span class="token class-name">Shape</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">paint</span><span class="token punctuation">(</span><span class="token string">"圆"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><ul class="BulletedListWrapper"><li id="https://www.notion.so/bdfa68ba11cb4b9b8944cb7517ef76ba" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">椭圆</span></span></li></ul><pre id="https://www.notion.so/bdcc5d123fde442a99f0e7de943db9f0" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">bridgepattern<span class="token punctuation">.</span>shape</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">bridgepattern<span class="token punctuation">.</span></span><span class="token class-name">Shape</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Ellipse</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">paint</span><span class="token punctuation">(</span><span class="token string">"椭圆"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><ul class="BulletedListWrapper"><li id="https://www.notion.so/eb107773a8dc411191fca1d8cf5734d5" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">矩形</span></span></li></ul><pre id="https://www.notion.so/9cc287d4e8984da1b391c752c49655e7" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">bridgepattern<span class="token punctuation">.</span>shape</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">bridgepattern<span class="token punctuation">.</span></span><span class="token class-name">Shape</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token keyword">extends</span> <span class="token class-name">Shape</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">paint</span><span class="token punctuation">(</span><span class="token string">"矩形"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/a9ea852f690f4ffba51db1eee1c92d2f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/4eccaf906a6d4bb3886bcdc5ddb38a65" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">我们要绘制一个绿色的圆和椭圆：</span></span></p></div><pre id="https://www.notion.so/aa0d98110669446293fdfe1adc41f2de" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">bridgepattern</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">bridgepattern<span class="token punctuation">.</span>color<span class="token punctuation">.</span></span><span class="token class-name">Green</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">bridgepattern<span class="token punctuation">.</span>shape<span class="token punctuation">.</span></span><span class="token class-name">Circle</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">bridgepattern<span class="token punctuation">.</span>shape<span class="token punctuation">.</span></span><span class="token class-name">Ellipse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestEntrance</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建一个绿色</span>
        <span class="token class-name">Color</span> green <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Green</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 创建一个圆形/椭圆</span>
        <span class="token class-name">Shape</span> ellipse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ellipse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Shape</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 上色</span>
        ellipse<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>green<span class="token punctuation">)</span><span class="token punctuation">;</span>
        circle<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>green<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 打印</span>
        ellipse<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        circle<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/f4f5c106b7744aefab6d0c0045530618" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">执行结果：</span></span></p></div><blockquote id="https://www.notion.so/f12445ac3dfc4cd3bf9eed72faa5d888" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedBg SemanticString__Fragment--BgGray">绿色的椭圆
绿色的圆</mark></span></span></blockquote><div id="https://www.notion.so/4f5bf6b64799474285668b7bf6ed1a70" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">如果要绘制蓝色的矩形：</span></span></p></div><pre id="https://www.notion.so/5b4d4fbdecd248868279be8be26924e9" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">bridgepattern</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">bridgepattern<span class="token punctuation">.</span>color<span class="token punctuation">.</span></span><span class="token class-name">Blue</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">bridgepattern<span class="token punctuation">.</span>shape<span class="token punctuation">.</span></span><span class="token class-name">Rectangle</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestEntrance</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testBlue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建一个蓝色</span>
        <span class="token class-name">Color</span> blue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 创建一个矩形</span>
        <span class="token class-name">Shape</span> rectangle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 上色</span>
        rectangle<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>blue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 打印</span>
        rectangle<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/ab45f6abe11a441c82429ae00c040bb4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">执行结果：</span></span></p></div><blockquote id="https://www.notion.so/98f34f0f424b43e0932155a943b6b2df" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedBg SemanticString__Fragment--BgGray">蓝色的矩形</mark></span></span></blockquote><div id="https://www.notion.so/4cb5cd6f85f342b498a8cc0c51f99528" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h2 id="https://www.notion.so/d4a31831922e4c6eb03e9bfaead84a5e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/d4a31831922e4c6eb03e9bfaead84a5e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">2.3 使用场景举例</span></span></h2><div id="https://www.notion.so/c869b6520d524ee49359ee20a3978b70" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">🥝</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString">如果需要开发一个跨平台视频播放器，可以在不同操作系统平台（如Windows、Linux、Unix等）上播放多种格式的视频文件，常见的视频格式包括MPEG、RMVB、AVI、WMV等。就可以使用</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><code class="SemanticString__Fragment SemanticString__Fragment--Code">桥接模式</code></strong></span><span class="SemanticString">设计该播放器。</span></span></p></div><div id="https://www.notion.so/8b1f6bb18da0484b9901331534a9946b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h2 id="https://www.notion.so/31f0fcea589642199b37ead5a0d35f7a" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/31f0fcea589642199b37ead5a0d35f7a"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">2.4 优点</strong></span></span></h2><div id="https://www.notion.so/c11c034ff805476386a0b6c7ae2c0a32" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">桥接模式的优点:</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/268a075752ee42a084628b6010b5e7d4" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">分离抽象接口及其实现部分。</span></span></li><li id="https://www.notion.so/2ff0e751daf04176add2dbe523a8a76a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">桥接模式有时类似于多继承方案，但是多继承方案违背了类的单一职责原则（即一个类只有一个变化的原因），复用性比较差，而且多继承结构中类的个数非常庞大，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><code class="SemanticString__Fragment SemanticString__Fragment--Code">桥接模式是比多继承方案更好的解决方法</code></strong></span><span class="SemanticString">。</span></span></li><li id="https://www.notion.so/2ed017e438614f75bcd06023b3b8f32b" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">桥接模式提高了系统的可扩充性，在两个变化维度中任意扩展一个维度，都不需要修改原有系统。实现细节对客户透明，可以对用户隐藏实现细节。</span></span></li></ul><h2 id="https://www.notion.so/29e0b908ec804fc1a46bfc0d2c64e456" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/29e0b908ec804fc1a46bfc0d2c64e456"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">2.5 缺点</strong></span></span></h2><div id="https://www.notion.so/91aa7c74b5bf458a836dc7e4ec65e802" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">桥接模式的缺点:</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/eb2fdd12fe1c458581e9640ff8fea1e4" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">桥接模式的引入会增加系统的理解与设计难度，由于聚合关联关系建立在抽象层，要求开发者针对抽象进行设计与编程。 </span></span></li><li id="https://www.notion.so/cea16eff0a134b9cac98c25c878c234c" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">桥接模式要求</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><code class="SemanticString__Fragment SemanticString__Fragment--Code">正确识别出系统中两个独立变化的维度</code></strong></span><span class="SemanticString">，因此其使用范围具有一定的局限性。</span></span></li></ul><div id="https://www.notion.so/05ef22a818ea4f1b85d0888a614366aa" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/0904bda792ea45f0b701429a1913edf9" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/0904bda792ea45f0b701429a1913edf9"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue">3、装饰者模式</mark></span></span></h1><div id="https://www.notion.so/8f64b3e0db3e492f834db9ebb21ae1d2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">一般有两种方式可以实现给一个类或对象增加行为：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/97093c4b08b144839eb2a1c3a085b455" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">继承机制，使用继承机制是给现有类添加功能的一种有效途径，通过继承一个现有类可以使得子类在拥有自身方法的同时还拥有父类的方法。</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">但是这种方法是静态的，用户不能控制增加行为的方式和时机</strong></span><span class="SemanticString">。</span></span></li><li id="https://www.notion.so/1263854648074c6a905b669a55d504b9" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">关联机制，即</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">将一个类的对象嵌入另一个对象中</strong></span><span class="SemanticString">，由另一个对象来决定是否调用嵌入对象的行为以便扩展自己的行为，我们称这个嵌入的对象为</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">装饰器</strong></span><span class="SemanticString">(Decorator)</span></span></li></ul><div id="https://www.notion.so/0867c00ac8c64378b3211a6aef4f363f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h2 id="https://www.notion.so/90018a43699d468a94ad4fcd01194082" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/90018a43699d468a94ad4fcd01194082"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">3.1 定义</span></span></h2><div id="https://www.notion.so/ffae98be9e9e4dfbada9979fc6e6901d" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">🥝</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString">装饰模式(Decorator Pattern) ：动态地给一个对象增加一些额外的职责(Responsibility)，就增加对象功能来说，装饰模式比生成子类实现更为灵活。其别名也可以称为包装器(Wrapper)，与适配器模式的别名相同，但它们适用于不同的场合。根据翻译的不同，装饰模式也有人称之为“油漆工模式”，它是一种对象结构型模式。</span></span></p></div><div id="https://www.notion.so/63fbb8634d984a38a53c7240f70b133a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">装饰模式包含如下角色：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/346427b9ba5e4f3291b577ed3d168e07" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Component: 抽象构件</span></span></li><li id="https://www.notion.so/ceabacda81fb4aec8e2326ff4cc8aff1" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">ConcreteComponent: 具体构件</span></span></li><li id="https://www.notion.so/fdfabafee79f4a7bbe3583ebdcf61395" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Decorator: 抽象装饰类</span></span></li><li id="https://www.notion.so/14c73ba758ec42c49efaa2ec1d727e42" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">ConcreteDecorator: 具体装饰类</span></span></li></ul><div id="https://www.notion.so/40fc0645565a4fb3a13658670069987a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/1b2036d6060846e9b34e25f7fb957435" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">UML图</strong></span></span></li></ul><div id="https://www.notion.so/9b82c22328eb46bd91922d6f22bed202" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Ffd833c1e-6a02-4161-aea8-68cc0e4fcbad%2FDecorator.jpg?width=643&amp;table=block&amp;id=9b82c223-28eb-46bd-9192-2d6f22bed202"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Ffd833c1e-6a02-4161-aea8-68cc0e4fcbad%2FDecorator.jpg?width=643&amp;table=block&amp;id=9b82c223-28eb-46bd-9192-2d6f22bed202" style="width:643px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/b87bf0cd910d45569d44cf52813ba636" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">时序图</strong></span></span></li></ul><div id="https://www.notion.so/a0242bc6dcf9416b9b6bbc22d1d46895" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fea8771dd-9406-48ce-9d59-e42f56f63868%2Fseq_Decorator.jpg?width=745&amp;table=block&amp;id=a0242bc6-dcf9-416b-9b6b-bc22d1d46895"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fea8771dd-9406-48ce-9d59-e42f56f63868%2Fseq_Decorator.jpg?width=745&amp;table=block&amp;id=a0242bc6-dcf9-416b-9b6b-bc22d1d46895" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/e2f410efb7424aedae07c29904149d54" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/e2f410efb7424aedae07c29904149d54"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">3.2 实践</span></span></h2><div id="https://www.notion.so/6c957264c3304797bc1272dc6d1820ce" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">实例：变形金刚</span></span></p></div><div id="https://www.notion.so/b3389228d18f4f9a9a1d96678a2a68e9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">变形金刚在变形之前是一辆汽车，它可以在陆地上</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">移动</strong></span><span class="SemanticString">。当它变成机器人之后除了能够在陆地上移动之外，还可以</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">说话</strong></span><span class="SemanticString">；如果需要，它还可以变成飞机，除了在陆地上移动还可以在</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">天空中飞翔</strong></span><span class="SemanticString">。</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/2c56723e1ae944339c2dcaba91673579" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">具有移动能力的变形金刚</span></span></li></ul><pre id="https://www.notion.so/63ba2a8fbd9441dd957b2fb7504a49cf" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">decorator</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Transform</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></span></span></code></pre><ul class="BulletedListWrapper"><li id="https://www.notion.so/aaad7aa852ce46d5b627535a4b4b6cf1" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">变成汽车</span></span></li></ul><pre id="https://www.notion.so/074d685f0f5448929b3be4a46134f112" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">decorator</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token keyword">extends</span> <span class="token class-name">Transform</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"car move"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><ul class="BulletedListWrapper"><li id="https://www.notion.so/5d9d6f919b4f4aa1a388f9d2c09443a5" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">提供一个装饰者changer</span></span></li></ul><pre id="https://www.notion.so/58e85c989aec4200b1961dad9cda1547" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">decorator</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Changer</span> <span class="token keyword">extends</span> <span class="token class-name">Transform</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></span></span></span></code></pre><ul class="BulletedListWrapper"><li id="https://www.notion.so/47ee8cdc60ea45108e2fcb00df4e65b2" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">变成机器人：</span></span></li></ul><pre id="https://www.notion.so/7d2710fbefbd44c0b396f85416c04302" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">decorator</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Robot</span> <span class="token keyword">extends</span> <span class="token class-name">Changer</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Transform</span> transform<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Robot</span><span class="token punctuation">(</span><span class="token class-name">Transform</span> transform<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>transform <span class="token operator">=</span> transform<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"robot move."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 扩展方法</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"I'm a robot now."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


<span class="token punctuation">}</span></span></span></span></code></pre><ul class="BulletedListWrapper"><li id="https://www.notion.so/9b03466eb529432ca3aba72bf8fb3741" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">变成飞机</span></span></li></ul><pre id="https://www.notion.so/f97a9a6f5a3947d4b29cdf491f636814" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">decorator</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AirPlane</span> <span class="token keyword">extends</span> <span class="token class-name">Changer</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Transform</span> transform<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">AirPlane</span><span class="token punctuation">(</span><span class="token class-name">Transform</span> transform<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>transform <span class="token operator">=</span> transform<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"airplane move"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 扩展方法</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"I can fly."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/a9b5d1ace53b4230b046807989081eb4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/84a65fe0b34e49648f236f019239afe5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">测试一下：</span></span></p></div><pre id="https://www.notion.so/3ade36f8d9794e1db0cfd7708f61d779" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">decorator</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestEntrance</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Transform</span> transform <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        transform<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Robot</span> robot <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Robot</span><span class="token punctuation">(</span>transform<span class="token punctuation">)</span><span class="token punctuation">;</span>
        robot<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        robot<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">AirPlane</span> airPlane <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AirPlane</span><span class="token punctuation">(</span>transform<span class="token punctuation">)</span><span class="token punctuation">;</span>
        airPlane<span class="token punctuation">.</span><span class="token function">fly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airPlane<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/d3d327d86ab54e5494bd121181e249d3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">执行结果：</span></span></p></div><blockquote id="https://www.notion.so/5e1be05e24634381a0fdc2273e4d7039" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedBg SemanticString__Fragment--BgGray">car move
I&#x27;m a robot now.
robot move.
I can fly.
airplane move</mark></span></span></blockquote><div id="https://www.notion.so/e7cbb94328c143d5909219e997758345" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/a4e36ce6bf4f45e3b0bd48f3241cbc22" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">JDK中的装饰者模式：</span></span></p></div><pre id="https://www.notion.so/87474a5ad45446b0b54f149c4e5e50f6" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token class-name">BufferedReader</span> input <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></span></span></code></pre><div id="https://www.notion.so/4da6492d719041d79c515b8aa678f0d3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h2 id="https://www.notion.so/f76929af54234b9aa10042fbaca7ca20" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/f76929af54234b9aa10042fbaca7ca20"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">3.3 优点</strong></span></span></h2><div id="https://www.notion.so/44eaec68b6544775b0d7e1078e60b0c8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">装饰模式的优点:</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/f6c1f7fd7d9745d79e1c70e95108ecbc" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">装饰模式与继承关系的目的都是要扩展对象的功能，但是装饰模式可以提供比继承更多的灵活性。</span></span></li><li id="https://www.notion.so/c3172475909c4bb996b4155a8e684f8e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">可以通过一种动态的方式来扩展一个对象的功能，通过配置文件可以在运行时选择不同的装饰器，从而实现不同的行为。</span></span></li><li id="https://www.notion.so/37e0641aa2514055af89615c8cfef5ee" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">通过使用不同的具体装饰类以及这些装饰类的排列组合，可以创造出很多不同行为的组合。可以使用多个具体装饰类来装饰同一对象，得到功能更为强大的对象。</span></span></li><li id="https://www.notion.so/8b6e59dbc8f64c6fbe4e849fd95ae580" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">具体构件类与具体装饰类可以独立变化，用户可以根据需要增加新的具体构件类和具体装饰类，在使用时再对其进行组合，原有代码无须改变，符合“开闭原则”</span></span></li></ul><h2 id="https://www.notion.so/34ebc007d2944478bf19161843ca90da" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/34ebc007d2944478bf19161843ca90da"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">3.4 缺点</strong></span></span></h2><div id="https://www.notion.so/8400f62a759647be9a9e19cbe7eeb1f8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">装饰模式的缺点:</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/e47fa5bc7a884e988c3d99591281afe2" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">使用装饰模式进行系统设计时将产生很多小对象，这些对象的区别在于它们之间相互连接的方式有所不同，而不是它们的类或者属性值有所不同，同时还将产生很多具体装饰类。这些装饰类和小对象的产生将增加系统的复杂度，加大学习与理解的难度。</span></span></li><li id="https://www.notion.so/ba1bd7ebb5fc40078f0a848715dd74da" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">这种比继承更加灵活机动的特性，也同时意味着装饰模式比继承更加易于出错，排错也很困难，对于多次装饰的对象，调试时寻找错误可能需要逐级排查，较为烦琐。</span></span></li></ul><div id="https://www.notion.so/12ff9471706b47cc9aa1479ac12b7492" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/7a8aac09c2134589b7711f92b0ae755d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/7a8aac09c2134589b7711f92b0ae755d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue">4、外观模式</mark></span></span></h1><h2 id="https://www.notion.so/134e1e3e52f749928e1cb421ff078132" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/134e1e3e52f749928e1cb421ff078132"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">4.1 定义</span></span></h2><div id="https://www.notion.so/e198d520e08e47e2be3a293576c3a874" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">🥝</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString">外观模式(Facade Pattern)：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">外部与一个子系统的通信必须通过一个统一的外观对象进行</strong></code></span><span class="SemanticString">，为子系统中的一组接口提供一个一致的界面，外观模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。外观模式又称为</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">门面模式</strong></code></span><span class="SemanticString">，它是一种对象结构型模式。</span></span></p></div><div id="https://www.notion.so/569de5128c1a4996a7f65407eeecd98e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">外观模式包含如下角色：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/b5b023a42d504a34a18d6d2429a04a5b" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Facade: 外观角色</span></span></li><li id="https://www.notion.so/95bcabfcc4344910907d58dc934cf60d" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">SubSystem:子系统角色</span></span></li></ul><div id="https://www.notion.so/018de3f3da28413bb3777ffb7cd20b98" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/aab7cd4662fc4692944d9da855316a74" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">UML图</span></span></li></ul><div id="https://www.notion.so/22679c2f885e4516b03c7d0948a38fae" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F08d4b49f-a1fb-4df9-8ba7-8558c5961721%2FFacade.jpg?width=539&amp;table=block&amp;id=22679c2f-885e-4516-b03c-7d0948a38fae"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F08d4b49f-a1fb-4df9-8ba7-8558c5961721%2FFacade.jpg?width=539&amp;table=block&amp;id=22679c2f-885e-4516-b03c-7d0948a38fae" style="width:539px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/8b6cd19dd0bc4c88bbb6f0216fc6792f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">时序图</strong></span></span></li></ul><div id="https://www.notion.so/4b473329f4024041b17e44db8a27314d" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fa9acd6fa-ff27-4dd3-a8af-43f6b46a3da2%2Fseq_Facade.jpg?width=795&amp;table=block&amp;id=4b473329-f402-4041-b17e-44db8a27314d"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fa9acd6fa-ff27-4dd3-a8af-43f6b46a3da2%2Fseq_Facade.jpg?width=795&amp;table=block&amp;id=4b473329-f402-4041-b17e-44db8a27314d" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/ad024b65ae1b40ef814d041825011b66" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/ad024b65ae1b40ef814d041825011b66"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">4.2 实践</span></span></h2><div id="https://www.notion.so/4df461f02f2249379965d6cc16924c6f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">假设一台电脑，它包含了 CPU（处理器），Memory（内存） ，Disk（硬盘）这几个部件，若想要启动电脑，则先后必须启动 CPU、Memory、Disk。关闭也是如此。</span></span></p></div><div id="https://www.notion.so/1bcd454e9d3e4e24b0f083bf3b7ceba0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">SubSystem 子系统角色：</strong></span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/5f71a8f7c0e24a8ba12acb4010abc04b" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">CPU</span></span></li></ul><pre id="https://www.notion.so/5bdd82626bde48f1b7ab28b0cbdda303" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">facadepattern<span class="token punctuation">.</span>subsystem</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CPU</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">startup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cpu startup!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cpu shutdown!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><ul class="BulletedListWrapper"><li id="https://www.notion.so/66559d3e5ca142c3b55983893ee99ef0" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Disk</span></span></li></ul><pre id="https://www.notion.so/17deabf1efa4460194bdf50c6eeed3f8" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">facadepattern<span class="token punctuation">.</span>subsystem</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Disk</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">startup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"disk startup!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"disk shutdown!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><ul class="BulletedListWrapper"><li id="https://www.notion.so/aaca02e002c84c1ea30a0b35904bde02" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Memery</span></span></li></ul><pre id="https://www.notion.so/2a96331345504b9d932c9032a6e4881e" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">facadepattern<span class="token punctuation">.</span>subsystem</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Memory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">startup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"memory startup!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"memory shutdown!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/c305cb9fce8642e5971a9c645d29e589" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/9cdeab6cb65a418a819f56ced6822fda" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/4eda2dc3faa04873ab9b262951c54e53" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Facade 外观角色:</strong></span></span></p></div><pre id="https://www.notion.so/0b0feb5ffa4347e2acb09d894337ca21" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">facadepattern<span class="token punctuation">.</span>facade</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">facadepattern<span class="token punctuation">.</span>subsystem<span class="token punctuation">.</span></span><span class="token class-name">CPU</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">facadepattern<span class="token punctuation">.</span>subsystem<span class="token punctuation">.</span></span><span class="token class-name">Disk</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">facadepattern<span class="token punctuation">.</span>subsystem<span class="token punctuation">.</span></span><span class="token class-name">Memory</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">CPU</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Memory</span> memory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Disk</span> disk<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cpu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CPU</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        memory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Memory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        disk <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Disk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">startup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"computer is starting..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cpu<span class="token punctuation">.</span><span class="token function">startup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        memory<span class="token punctuation">.</span><span class="token function">startup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        disk<span class="token punctuation">.</span><span class="token function">startup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"computer started!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"computer is shutting down..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cpu<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        memory<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        disk<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"computer has shut down!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/29f1b9c1e6d1482ba48a4c9504683169" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/119c04af80de40dab70d6f1806769231" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">测试一下：</span></span></p></div><pre id="https://www.notion.so/fbac816cd8f34e7998897dfa7b24623d" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">facadepattern</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">facadepattern<span class="token punctuation">.</span>facade<span class="token punctuation">.</span></span><span class="token class-name">Computer</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestEntrance</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">startup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/776c1a1779ea407ea668d85797a2b68e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/7040284646da4e848c914928761b8c45" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">执行结果：</span></span></p></div><blockquote id="https://www.notion.so/8eb1be6f8f40466eb3ecf711234b9cb7" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedBg SemanticString__Fragment--BgGray">computer is starting...
cpu startup!
memory startup!
disk startup!
computer started!</mark></span></span></blockquote><div id="https://www.notion.so/a7619669b507441dac6429963b883fd5" class="Divider"></div><blockquote id="https://www.notion.so/5288658610a24d989b218961b81c4ddc" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedBg SemanticString__Fragment--BgGray">computer is shutting down...
cpu shutdown!
memory shutdown!
disk shutdown!
computer has shut down!</mark></span></span></blockquote><div id="https://www.notion.so/62d5116ae8d548f5ba195453eafc568c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h2 id="https://www.notion.so/03aad10867704e43b5babe60cf9ee98f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/03aad10867704e43b5babe60cf9ee98f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">4.3 优点</strong></span></span></h2><div id="https://www.notion.so/b744ea6c1ff94225ac1d111eaa94f198" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">外观模式的优点</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/deb01a777bf146d59f0f6b2a3e81065a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">对客户屏蔽子系统组件，减少了客户处理的对象数目并使得子系统使用起来更加容易。通过引入外观模式，客户代码将变得很简单，与之关联的对象也很少。</span></span></li><li id="https://www.notion.so/3227dcb8899248f39df38607169c9b90" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">实现了子系统与客户之间的松耦合关系，这使得子系统的组件变化不会影响到调用它的客户类，只需要调整外观类即可。</span></span></li><li id="https://www.notion.so/f70b9952fa76466e9e3d63e8c10bec73" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">降低了大型软件系统中的编译依赖性，并简化了系统在不同平台之间的移植过程，因为编译一个子系统一般不需要编译所有其他的子系统。一个子系统的修改对其他子系统没有任何影响，而且子系统内部变化也不会影响到外观对象。</span></span></li><li id="https://www.notion.so/8970c293e0d34b37bfe18babe1c3f01d" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">只是提供了一个访问子系统的统一入口，并不影响用户直接使用子系统类。</span></span></li></ul><h2 id="https://www.notion.so/99774051dfac478ba2d14bb2e2f018ef" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/99774051dfac478ba2d14bb2e2f018ef"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">4.4 缺点</strong></span></span></h2><div id="https://www.notion.so/db9c65c4a16743e6bfd68137c5a41ba1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">外观模式的缺点</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/43a34cf04d104eeba6e324da094ced3e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">不能很好地限制客户使用子系统类，如果对客户访问子系统类做太多的限制则减少了可变性和灵活性。</span></span></li><li id="https://www.notion.so/ef6293a5ec3040cc873b6d3ed078810c" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">在不引入抽象外观类的情况下，增加新的子系统可能需要修改外观类或客户端的源代码，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><code class="SemanticString__Fragment SemanticString__Fragment--Code">违背了“开闭原则”</code></strong></span><span class="SemanticString">。</span></span></li></ul><div id="https://www.notion.so/3555792f2b1a413e9d1fc8b09fa64f65" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/7e939dfac8364fe4ae265bf922e05aa7" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/7e939dfac8364fe4ae265bf922e05aa7"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue">5、享元模式</mark></span></span></h1><h2 id="https://www.notion.so/fed19add2e944f39a2d46fa58cd75d5c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/fed19add2e944f39a2d46fa58cd75d5c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">5.1 定义</span></span></h2><div id="https://www.notion.so/c24b4f9a5f8c40788711747e11da7f7e" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">🥝</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString">享元模式(Flyweight Pattern)：运用共享技术有效地支持大量细粒度对象的复用。系统只使用少量的对象，而这些对象都很相似，状态变化很小，可以实现对象的多次复用。由于享元模式要求能够共享的对象必须是细粒度对象，因此它又称为轻量级模式，它是一种对象结构型模式。</span></span></p></div><div id="https://www.notion.so/5c14b68db606472fb3309ce7b1956131" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/51e8cb485fd847efa1f9c45c359c5ff5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">享元模式包含如下角色：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/de7ddb144b7048c192e9cb6784475a3a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Flyweight: 抽象享元类</span></span></li><li id="https://www.notion.so/d2287af5d372493fb65c0a0a4f3dc1df" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">ConcreteFlyweight: 具体享元类</span></span></li><li id="https://www.notion.so/2b6f27684a5d49a1b9518eb375981b34" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">UnsharedConcreteFlyweight: 非共享具体享元类</span></span></li><li id="https://www.notion.so/7ac209a632df4800b89601dd63ae9a89" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">FlyweightFactory: 享元工厂类</span></span></li></ul><div id="https://www.notion.so/7dcd1697658647069850cebda883ecae" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/e9dd7aae26134029a783d0bf2908d7fd" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">UML图</strong></span></span></li></ul><div id="https://www.notion.so/e3afc64c007d49a1a440b188edd2a533" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F061634aa-4118-43f2-8137-05a88d1f5007%2FFlyweight.jpg?width=747&amp;table=block&amp;id=e3afc64c-007d-49a1-a440-b188edd2a533"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F061634aa-4118-43f2-8137-05a88d1f5007%2FFlyweight.jpg?width=747&amp;table=block&amp;id=e3afc64c-007d-49a1-a440-b188edd2a533" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/2d38767f22e3440dbfb33ef8deb07e80" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">时序图</strong></span></span></li></ul><div id="https://www.notion.so/a8dc929c9a5b425d8681a410961f32f3" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F3ac4b737-5cd7-4214-a804-8cbcfc50fc08%2Fseq_Flyweight.jpg?width=598&amp;table=block&amp;id=a8dc929c-9a5b-425d-8681-a410961f32f3"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F3ac4b737-5cd7-4214-a804-8cbcfc50fc08%2Fseq_Flyweight.jpg?width=598&amp;table=block&amp;id=a8dc929c-9a5b-425d-8681-a410961f32f3" style="width:598px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/b8e243bf5f844dddaa4c5bf184ab0ccc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/5470a4f7d61f44dcafb9498ce0c0df37" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">首先我们定义一个享元抽象类</span></span></li></ul><pre id="https://www.notion.so/b67cd5fb96de47d5bda8ca05c4028006" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">flyweight</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Flyweight</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span></span></span></span></code></pre><ul class="BulletedListWrapper"><li id="https://www.notion.so/b4e3b0f6711b418dbb9d58aabfcfd627" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">再实现一个具体的享元类</span></span></li></ul><pre id="https://www.notion.so/db732fb7e07a40ffa787fb4c28cbb14d" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">flyweight</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteFlyweight</span> <span class="token keyword">extends</span> <span class="token class-name">Flyweight</span><span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> state<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ConcreteFlyweight</span><span class="token punctuation">(</span><span class="token class-name">String</span> state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Flyweight["</span> <span class="token operator">+</span> state <span class="token operator">+</span> <span class="token string">"] 的operate在工作"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/7df6b1484bad4fb696ff596efb85ea1b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/39b74f605a8e40278ef7ef0c29fadf52" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">实现一个享元工厂类</span></span></li></ul><pre id="https://www.notion.so/903ddc44989646838505126877273097" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">flyweight</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FlyweightFactory</span> <span class="token punctuation">{</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Flyweight</span><span class="token punctuation">></span></span> flyweightMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Flyweight</span> <span class="token function">getFlyweight</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>flyweightMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Flyweight</span> fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteFlyweight</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            flyweightMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> fw<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> fw<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"享元池中已经存在，直接使用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> flyweightMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/b2a2a549ebd84e3fa9f41ff72c894ad4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/df61a61b66ca4198b27128d51ed60f84" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">我们来测试一下：</span></span></p></div><pre id="https://www.notion.so/459a7989ec3149b1bfb2bca1f6a0d38c" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">flyweight</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestEntrance</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">FlyweightFactory</span> flyweightFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FlyweightFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Flyweight</span> fw1 <span class="token operator">=</span>  flyweightFactory<span class="token punctuation">.</span><span class="token function">getFlyweight</span><span class="token punctuation">(</span><span class="token string">"one"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fw1<span class="token punctuation">.</span><span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Flyweight</span> fw2 <span class="token operator">=</span> flyweightFactory<span class="token punctuation">.</span><span class="token function">getFlyweight</span><span class="token punctuation">(</span><span class="token string">"two"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fw2<span class="token punctuation">.</span><span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Flyweight</span> fw3 <span class="token operator">=</span> flyweightFactory<span class="token punctuation">.</span><span class="token function">getFlyweight</span><span class="token punctuation">(</span><span class="token string">"one"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fw3<span class="token punctuation">.</span><span class="token function">operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/d86d8589371f46b78f01f09fcd9cf900" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">执行结果：</span></span></p></div><blockquote id="https://www.notion.so/33ed9737e7864b7a84cbe645c286d81b" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedBg SemanticString__Fragment--BgGray">Flyweight[one] 的operate在工作
Flyweight[two] 的operate在工作
享元池中已经存在，直接使用
Flyweight[one] 的operate在工作</mark></span></span></blockquote><div id="https://www.notion.so/90401f8b3287456baad70b553d4b3e0d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/4ac4ed3d26774ba4ada11d35a565c2da" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">可见，享元模式中，我们实现了已经有的对象的复用——在享元池中直接获取已存在的对象。</span></span></p></div><div id="https://www.notion.so/b2a83ae086974d62a4470c558db4b876" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h2 id="https://www.notion.so/8255f7d203a446559270348c5785268d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/8255f7d203a446559270348c5785268d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">5.2 </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">优点</strong></span></span></h2><div id="https://www.notion.so/53940271daed435b87f0eb454a275ea6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">享元模式的优点</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/ee786c56cac14292a3e1ae2f444797c1" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">享元模式的优点在于它可以极大减少内存中对象的数量，使得相同对象或相似对象在内存中只保存一份。</span></span></li><li id="https://www.notion.so/d2ff21ada9e14e4094db65e63120c708" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">享元模式的外部状态相对独立，而且不会影响其内部状态，从而使得享元对象可以在不同的环境中被共享。</span></span></li></ul><h2 id="https://www.notion.so/a46da8e2bce34233861355aa7a540345" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/a46da8e2bce34233861355aa7a540345"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">5.3 缺点</strong></span></span></h2><div id="https://www.notion.so/116f453729a94c72907211653ff163bb" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">享元模式的缺点</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/84d171b4edc341668da4a172e532ed96" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">享元模式使得系统更加复杂，需要分离出内部状态和外部状态，这使得程序的逻辑复杂化。</span></span></li><li id="https://www.notion.so/78f456284b234ff6ace87f01c9f58570" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">为了使对象可以共享，享元模式需要将享元对象的状态外部化，而读取外部状态使得运行时间变长。</span></span></li></ul><h2 id="https://www.notion.so/7ffe74701368477d96c5083e6a2e77e4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/7ffe74701368477d96c5083e6a2e77e4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">5.4 </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">模式应用</strong></span></span></h2><div id="https://www.notion.so/e2d2b13c52c545ec92ea764e432b75c0" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">享元模式在编辑器软件中大量使用，如在一个文档中多次出现相同的图片，则只需要创建一个图片对象，通过在应用程序中设置该图片出现的位置，可以实现该图片在不同地方多次重复显示。</span></span></p></div><div id="https://www.notion.so/8229bc35927f489eaa87c9ea38dd8ba4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/3a7fde647bc843a8a440b62590a5dc27" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/3a7fde647bc843a8a440b62590a5dc27"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue">6、代理</mark></span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">模式</strong></mark></span></span></h1><div id="https://www.notion.so/d48da607269e4413b189f44cac2882c9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在某些情况下，一个客户不想或者不能直接引用一个对 象，此时可以通过一个称之为“代理”的第三者来实现 间接引用。</span></span></p></div><div id="https://www.notion.so/1f171abe3a584626b7c3752e83ab0065" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">代理对象可以在客户端和目标对象之间起到 中介的作用</strong></span><span class="SemanticString">，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">并且可以通过代理对象去掉客户不能看到 的内容和服务或者添加客户需要的额外服务（如特性增强）</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/0b8a1bb1eac6451bbc8ce78819bc479b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">通过引入一个新的对象（如小图片和远程代理 对象）来实现对真实对象的操作或者将新的对象作为真实对象的一个</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">替身</strong></code></span><span class="SemanticString">，这种实现机制即为代理模式，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">通过引入代理对象来间接访问一个对象，这就是代理模式的模式动机</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/1bbf488f816745b6bbd028fbacb47705" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h2 id="https://www.notion.so/872d36f49c32468c8a90217cbb24aee1" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/872d36f49c32468c8a90217cbb24aee1"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">6.1 定义</span></span></h2><div id="https://www.notion.so/c453c64954b548d28f334dee9967f057" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">🥝</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString">代理模式(Proxy Pattern) ：给某一个对象提供一个代理，并由代理对象控制对原对象的引用。</span></span></p></div><div id="https://www.notion.so/8af98023ebde4a8f9becd3b91ef40a3f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/664471008a77492aabc0f705759e3367" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">代理模式包含如下角色：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/91aeb64bc3dd42f0a42f610c2906c9ee" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Subject: 抽象主题角色</span></span></li><li id="https://www.notion.so/07249c38c9104af189e784a5c7a3601b" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Proxy: 代理主题角色</span></span></li><li id="https://www.notion.so/28a2c7837a034ab3ae4ea52af267fdc1" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">RealSubject: 真实主题角色</span></span></li></ul><div id="https://www.notion.so/1d1bec09ac0f49748ea443fff9728d77" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/d3b13329b4f7424da4313c67d7025396" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">UML图</strong></span></span></li></ul><div id="https://www.notion.so/d4d2cd3613ea4a6fb5f7d8a0187f32c6" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F45c9e6c3-de6f-4fcb-9426-c7e019d59215%2FProxy.jpg?width=658&amp;table=block&amp;id=d4d2cd36-13ea-4a6f-b5f7-d8a0187f32c6"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F45c9e6c3-de6f-4fcb-9426-c7e019d59215%2FProxy.jpg?width=658&amp;table=block&amp;id=d4d2cd36-13ea-4a6f-b5f7-d8a0187f32c6" style="width:658px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/f5553f5245384c229fbb257b6f218f36" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">时序图</strong></span></span></li></ul><div id="https://www.notion.so/f4ebd869d3b1476d89ba1c3052088760" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F98d5afac-27c7-46ff-bd8c-8cbcce086aca%2Fseq_Proxy.jpg?width=613&amp;table=block&amp;id=f4ebd869-d3b1-476d-89ba-1c3052088760"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F98d5afac-27c7-46ff-bd8c-8cbcce086aca%2Fseq_Proxy.jpg?width=613&amp;table=block&amp;id=f4ebd869-d3b1-476d-89ba-1c3052088760" style="width:613px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/3d0c327b769a42f8aaa5f9f7175f9010" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/3d0c327b769a42f8aaa5f9f7175f9010"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">6.2 实践</span></span></h2><ul class="BulletedListWrapper"><li id="https://www.notion.so/21182dc12d77415caf680be8b7342991" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">实现一个被代理的对象subject，其功能是发送一个请求。</span></span></li></ul><pre id="https://www.notion.so/0aa4ebad7fac45a3b8758b5be604b677" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">proxy</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"这是真实发出的请求"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><ul class="BulletedListWrapper"><li id="https://www.notion.so/5bb8410dd84d440c85989777586c4698" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">为subject创建一个代理类proxy：</span></span></li></ul><pre id="https://www.notion.so/587dfd2be693458e8a7c9ab53fcc043e" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">proxy</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Proxy</span> <span class="token keyword">extends</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">preRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">afterRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">preRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"preRequest：发送请求前先处理一下"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">afterRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"afterRequest: 请求完再处理一下"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/84fd2669c1a046b4a82acfbbc29eb257" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">测试一下：</span></span></p></div><pre id="https://www.notion.so/ee77771b09d04ba48c1f12e7b68f6e71" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">package</span> <span class="token namespace">proxy</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestEntrance</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Proxy</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxy<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/d93baf126bff44f08c862b56c5e2b5c1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">执行结果：</span></span></p></div><blockquote id="https://www.notion.so/56bb5d6cc07246b9b59d83781bf19eb6" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedBg SemanticString__Fragment--BgGray">preRequest：发送请求前先处理一下
这是真实发出的请求
afterRequest: 请求完再处理一下</mark></span></span></blockquote><div id="https://www.notion.so/91665db4459c443a97dd36563ca9224d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/c68ab6b4b9c645baac0b6177aa57362d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">可见，我们对subject做了代理后，在代理中可以插入一些方法，实现其他目的。</span></span></p></div><div id="https://www.notion.so/eb39129d2aa7428491da249ecb4a6707" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h2 id="https://www.notion.so/af02e361a63b44c2a29a2872fe13c2af" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/af02e361a63b44c2a29a2872fe13c2af"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">6.3 </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">优点</strong></span></span></h2><div id="https://www.notion.so/e8f512d111b14c2c969f0362e6a5d57d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">代理模式的优点</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/8aef3069fd7f41d0b029e5465967f079" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">代理模式能够协调调用者和被调用者，在一定程度上降低了系 统的耦合度。</span></span></li><li id="https://www.notion.so/c9267a88350c42cba0332386ce4cfc81" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">远程代理使得客户端可以访问在远程机器上的对象，远程机器 可能具有更好的计算性能与处理速度，可以快速响应并处理客户端请求。</span></span></li><li id="https://www.notion.so/8e508536a63f4769b5eabaecd1983241" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">虚拟代理通过使用一个小对象来代表一个大对象，可以减少系 统资源的消耗，对系统进行优化并提高运行速度。</span></span></li><li id="https://www.notion.so/8177f5d6e1684c3bba843413d1af0dde" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">保护代理可以控制对真实对象的使用权限。</span></span></li></ul><h2 id="https://www.notion.so/4ae39af4e44a44b8ac5284302ada0dac" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/4ae39af4e44a44b8ac5284302ada0dac"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">6.4 缺点</strong></span></span></h2><div id="https://www.notion.so/e5f1c7c98a274154b3fbaf6ce07decf7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">代理模式的缺点</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/f8471a7513704e068f111004568ac5b1" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">由于在客户端和真实主题之间增加了代理对象，因此 有些类型的代理模式可能会造成请求的处理速度变慢。</span></span></li><li id="https://www.notion.so/d8e71ef095644c9aa3c627adaf90b5e1" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">实现代理模式需要额外的工作，有些代理模式的实现 非常复杂。</span></span></li></ul><div id="https://www.notion.so/1cdcf75f28f3470082160054a542b564" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h2 id="https://www.notion.so/9a3e3d4ef54f4035a94b4245acf05ed1" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/9a3e3d4ef54f4035a94b4245acf05ed1"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">6.5 </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">适用环境</strong></span></span></h2><div id="https://www.notion.so/ade896267a9c4439aa9bd71dd3291ba1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">根据代理模式的使用目的，常见的代理模式有以下几种类型：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/d32aa4f07a1240fdb454bd9d81ce5b33" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">远程(Remote)代理：为一个位于不同的地址空间的对象提供一个本地 的代理对象，这个不同的地址空间可以是在同一台主机中，也可是在 另一台主机中，远程代理又叫做大使(Ambassador)。</span></span></li><li id="https://www.notion.so/b5cb5168fffd46bbb1d1873aa1c7f561" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">虚拟(Virtual)代理：如果需要创建一个资源消耗较大的对象，先创建一个消耗相对较小的对象来表示，真实对象只在需要时才会被真正创建。</span></span></li><li id="https://www.notion.so/b59e5cf98a3748d69e1aa61355edc4e3" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Copy-on-Write代理：它是虚拟代理的一种，把复制（克隆）操作延迟 到只有在客户端真正需要时才执行。一般来说，对象的深克隆是一个 开销较大的操作，Copy-on-Write代理可以让这个操作延迟，只有对象被用到的时候才被克隆。</span></span></li><li id="https://www.notion.so/9184dd8a328b4b04addd3c5236453b7a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">保护(Protect or Access)代理：控制对一个对象的访问，可以给不同的用户提供不同级别的使用权限。</span></span></li><li id="https://www.notion.so/ca8eaddade094aafb36bee9964be3154" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">缓冲(Cache)代理：为某一个目标操作的结果提供临时的存储空间，以便多个客户端可以共享这些结果。</span></span></li><li id="https://www.notion.so/4b92ba2de60545adbdf34a56eb28ab04" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">防火墙(Firewall)代理：保护目标不让恶意用户接近。</span></span></li><li id="https://www.notion.so/e829103cbb0241789b11eb080c9d3db9" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">同步化(Synchronization)代理：使几个用户能够同时使用一个对象而没有冲突。</span></span></li><li id="https://www.notion.so/b84c033929864a2e9b2efbe58386b945" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">智能引用(Smart Reference)代理：当一个对象被引用时，提供一些额外的操作，如将此对象被调用的次数记录下来等。</span></span></li></ul><h2 id="https://www.notion.so/b6b758f9445542e2a9412971489ffa59" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/b6b758f9445542e2a9412971489ffa59"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">6.6 </strong></span><span class="SemanticString">动态代理</span></span></h2><ul class="BulletedListWrapper"><li id="https://www.notion.so/5f46f4ca48d644e1b9473bd0eb5a4a00" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">动态代理是一种较为高级的代理模式，它的典型应用就是Spring AOP。</span></span></li><li id="https://www.notion.so/471ff36c9b234a92854d641de4a4c9ec" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">在传统的代理模式中，客户端通过Proxy调用RealSubject类的request()方法，同时还在代理类中封装了其他方法(如preRequest()和postRequest())，可以处理一些其他问题。</span></span></li><li id="https://www.notion.so/4bbf2a2b8c7445bc89a58358555f2d47" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">如果按照这种方法使用代理模式，那么真实主题角色必须是事先已经存在的，并将其作为代理对象的内部成员属性。如果一个真实主题角色必须对应一个代理主题角色，这将导致系统中的类个数急剧增加，因此需要想办法减少系统中类的个数，此外，如何在事先不知道真实主题角色的情况下使用代理主题角色，这都是动态代理需要解决的问题。</span></span></li></ul><div id="https://www.notion.so/166eb9e5883f41678b967eeec3c28940" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/015c6bd018a04bd4abcb898fe003fc60" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">以上就是6种结构型模式的内容。</span></span></p></div><div id="https://www.notion.so/c3469f7e726c4f00aecac9606f2174af" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></article>
  <footer class="Footer">
  <div>&copy; 锡安的自留地 2024</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>

</body>

</html>